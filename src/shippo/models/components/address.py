"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .addressvalidationresults import (
    AddressValidationResults,
    AddressValidationResultsTypedDict,
)
from datetime import datetime
from pydantic import model_serializer
from shippo.types import BaseModel, UNSET_SENTINEL
from typing import Optional, Union
from typing_extensions import NotRequired, TypeAliasType, TypedDict


LatitudeTypedDict = TypeAliasType("LatitudeTypedDict", Union[float, str])
r"""Latitude of address"""


Latitude = TypeAliasType("Latitude", Union[float, str])
r"""Latitude of address"""


LongitudeTypedDict = TypeAliasType("LongitudeTypedDict", Union[float, str])
r"""Longitude of address"""


Longitude = TypeAliasType("Longitude", Union[float, str])
r"""Longitude of address"""


class AddressTypedDict(TypedDict):
    r"""Address represents the address as retrieved from the database"""

    country: str
    r"""ISO 3166-1 alpha-2 country codes and country names can be used. For most consistent results, we reccomend using country codes like `US` or `DE`.
    If using country names, please ensure they are spelled correctly and in English. Country names are converted to country codes.
    Refer to this <a href=\"https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements\" target=\"_blank\">guide</a> for a list of country codes.
    Sending a country is always required.
    """
    name: NotRequired[str]
    r"""**required for purchase**<br>
    First and Last Name of the addressee
    """
    company: NotRequired[str]
    r"""Company Name"""
    street1: NotRequired[str]
    r"""**required for purchase**<br>
    First street line, 35 character limit. Usually street number and street name (except for DHL Germany, see street_no).
    """
    street2: NotRequired[str]
    r"""Second street line, 35 character limit."""
    street3: NotRequired[str]
    r"""Third street line, 35 character limit.
    Only accepted for USPS international shipments, UPS domestic and UPS international shipments.
    """
    street_no: NotRequired[str]
    r"""Street number of the addressed building.
    This field can be included in street1 for all carriers except for DHL Germany.
    """
    city: NotRequired[str]
    r"""**required for purchase**<br>
    Name of a city. When creating a Quote Address, sending a city is optional but will yield more accurate Rates.
    Please bear in mind that city names may be ambiguous (there are 34 Springfields in the US). Pass in a state
    or a ZIP code (see below), if known, it will yield more accurate results.
    """
    state: NotRequired[str]
    r"""**required for purchase for some countries**<br>
    State/Province values are required for shipments from/to the US, AU, and CA. UPS requires province for some
    countries (i.e Ireland). To receive more accurate quotes, passing this field is recommended. Most carriers
    only accept two or three character state abbreviations.
    """
    zip: NotRequired[str]
    r"""**required for purchase**<br>
    Postal code of an Address. When creating a Quote Addresses, sending a ZIP is optional but will yield more
    accurate Rates.
    """
    phone: NotRequired[str]
    r"""Addresses containing a phone number allow carriers to call the recipient when delivering the Parcel. This
    increases the probability of delivery and helps to avoid accessorial charges after a Parcel has been shipped.
    """
    email: NotRequired[str]
    r"""E-mail address of the contact person, RFC3696/5321-compliant."""
    is_residential: NotRequired[bool]
    metadata: NotRequired[str]
    r"""A string of up to 100 characters that can be filled with any additional information you want
    to attach to the object.
    """
    is_complete: NotRequired[bool]
    r"""Complete addresses contain all required values.<br><br>Incomplete addresses have failed one or multiple
    validations.<br>Incomplete Addresses are eligible for requesting rates but lack at least one required
    value for purchasing labels.
    """
    latitude: NotRequired[LatitudeTypedDict]
    r"""Latitude of address"""
    longitude: NotRequired[LongitudeTypedDict]
    r"""Longitude of address"""
    object_created: NotRequired[datetime]
    r"""Date and time of Address creation."""
    object_id: NotRequired[str]
    r"""Unique identifier of the given Address object.
    This ID is required to create a Shipment object.
    """
    object_owner: NotRequired[str]
    r"""Username of the user who created the Address object."""
    object_updated: NotRequired[datetime]
    r"""Date and time of last Address update. Since you cannot update Addresses after they were created, this time
    stamp reflects the time when the Address was changed by Shippo's systems for the last time, e.g., during the
    approximation of one or more values.
    """
    validation_results: NotRequired[AddressValidationResultsTypedDict]
    r"""Object that contains information regarding if an address had been validated or not. Also contains any messages
    generated during validation. Children keys are <code>is_valid</code>(boolean) and <code>messages</code>(array).
    """
    test: NotRequired[bool]
    r"""Indicates whether the object has been created in test mode."""


class Address(BaseModel):
    r"""Address represents the address as retrieved from the database"""

    country: str
    r"""ISO 3166-1 alpha-2 country codes and country names can be used. For most consistent results, we reccomend using country codes like `US` or `DE`.
    If using country names, please ensure they are spelled correctly and in English. Country names are converted to country codes.
    Refer to this <a href=\"https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements\" target=\"_blank\">guide</a> for a list of country codes.
    Sending a country is always required.
    """

    name: Optional[str] = None
    r"""**required for purchase**<br>
    First and Last Name of the addressee
    """

    company: Optional[str] = None
    r"""Company Name"""

    street1: Optional[str] = None
    r"""**required for purchase**<br>
    First street line, 35 character limit. Usually street number and street name (except for DHL Germany, see street_no).
    """

    street2: Optional[str] = None
    r"""Second street line, 35 character limit."""

    street3: Optional[str] = None
    r"""Third street line, 35 character limit.
    Only accepted for USPS international shipments, UPS domestic and UPS international shipments.
    """

    street_no: Optional[str] = None
    r"""Street number of the addressed building.
    This field can be included in street1 for all carriers except for DHL Germany.
    """

    city: Optional[str] = None
    r"""**required for purchase**<br>
    Name of a city. When creating a Quote Address, sending a city is optional but will yield more accurate Rates.
    Please bear in mind that city names may be ambiguous (there are 34 Springfields in the US). Pass in a state
    or a ZIP code (see below), if known, it will yield more accurate results.
    """

    state: Optional[str] = None
    r"""**required for purchase for some countries**<br>
    State/Province values are required for shipments from/to the US, AU, and CA. UPS requires province for some
    countries (i.e Ireland). To receive more accurate quotes, passing this field is recommended. Most carriers
    only accept two or three character state abbreviations.
    """

    zip: Optional[str] = None
    r"""**required for purchase**<br>
    Postal code of an Address. When creating a Quote Addresses, sending a ZIP is optional but will yield more
    accurate Rates.
    """

    phone: Optional[str] = None
    r"""Addresses containing a phone number allow carriers to call the recipient when delivering the Parcel. This
    increases the probability of delivery and helps to avoid accessorial charges after a Parcel has been shipped.
    """

    email: Optional[str] = None
    r"""E-mail address of the contact person, RFC3696/5321-compliant."""

    is_residential: Optional[bool] = None

    metadata: Optional[str] = None
    r"""A string of up to 100 characters that can be filled with any additional information you want
    to attach to the object.
    """

    is_complete: Optional[bool] = None
    r"""Complete addresses contain all required values.<br><br>Incomplete addresses have failed one or multiple
    validations.<br>Incomplete Addresses are eligible for requesting rates but lack at least one required
    value for purchasing labels.
    """

    latitude: Optional[Latitude] = None
    r"""Latitude of address"""

    longitude: Optional[Longitude] = None
    r"""Longitude of address"""

    object_created: Optional[datetime] = None
    r"""Date and time of Address creation."""

    object_id: Optional[str] = None
    r"""Unique identifier of the given Address object.
    This ID is required to create a Shipment object.
    """

    object_owner: Optional[str] = None
    r"""Username of the user who created the Address object."""

    object_updated: Optional[datetime] = None
    r"""Date and time of last Address update. Since you cannot update Addresses after they were created, this time
    stamp reflects the time when the Address was changed by Shippo's systems for the last time, e.g., during the
    approximation of one or more values.
    """

    validation_results: Optional[AddressValidationResults] = None
    r"""Object that contains information regarding if an address had been validated or not. Also contains any messages
    generated during validation. Children keys are <code>is_valid</code>(boolean) and <code>messages</code>(array).
    """

    test: Optional[bool] = None
    r"""Indicates whether the object has been created in test mode."""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "name",
                "company",
                "street1",
                "street2",
                "street3",
                "street_no",
                "city",
                "state",
                "zip",
                "phone",
                "email",
                "is_residential",
                "metadata",
                "is_complete",
                "latitude",
                "longitude",
                "object_created",
                "object_id",
                "object_owner",
                "object_updated",
                "validation_results",
                "test",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
