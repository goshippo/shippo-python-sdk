"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .responsemessage import ResponseMessage, ResponseMessageTypedDict
from .servicelevelwithparent import (
    ServiceLevelWithParent,
    ServiceLevelWithParentTypedDict,
)
from datetime import datetime
from enum import Enum
from pydantic import model_serializer
from shippo.types import BaseModel, UNSET_SENTINEL
from typing import List, Optional
from typing_extensions import NotRequired, TypedDict


class Attribute(str, Enum):
    BESTVALUE = "BESTVALUE"
    CHEAPEST = "CHEAPEST"
    FASTEST = "FASTEST"


class RateTypedDict(TypedDict):
    amount: str
    r"""Final Rate price, expressed in the currency used in the sender's country."""
    amount_local: str
    r"""Final Rate price, expressed in the currency used in the recipient's country."""
    currency: str
    r"""Currency used in the sender's country, refers to `amount`.
    The <a href=\"http://www.xe.com/iso4217.php\">official ISO 4217</a> currency codes are used, e.g. `USD` or `EUR`.
    """
    currency_local: str
    r"""Currency used in the recipient's country, refers to `amount_local`.
    The <a href=\"http://www.xe.com/iso4217.php\">official ISO 4217</a> currency codes are used, e.g. `USD` or \"EUR\".
    """
    attributes: List[Attribute]
    r"""An array containing specific attributes of this Rate in context of the entire shipment.
    Attributes can be assigned `CHEAPEST`, `FASTEST`, or `BESTVALUE`.
    """
    carrier_account: str
    r"""Object ID of the carrier account that has been used to retrieve the rate."""
    object_created: datetime
    r"""Date and time of Rate creation."""
    object_id: str
    r"""Unique identifier of the given Rate object."""
    object_owner: str
    r"""Username of the user who created the rate object."""
    provider: str
    r"""Carrier offering the rate, e.g., `FedEx` or `Deutsche Post DHL`."""
    servicelevel: ServiceLevelWithParentTypedDict
    shipment: str
    arrives_by: NotRequired[str]
    r"""Predicted time the carrier will deliver the package in the destination's local time zone. In the format `HH:MM:SS`."""
    duration_terms: NotRequired[str]
    r"""Further clarification of the transit times.
    Often, this includes notes that the transit time as given in \"days\" is only an average, not a guaranteed time.
    """
    estimated_days: NotRequired[int]
    r"""Estimated transit time (duration) in days of the Parcel at the given servicelevel.
    Please note that this is not binding, but only an average value as given by the provider.
    Shippo is not able to guarantee any transit times.
    """
    included_insurance_price: NotRequired[str]
    r"""Cost to the user to insure the Rate for the requested amount of coverage, if insurance coverage was requested.
    Expressed in the currency used in the sender's country. Will be null if no insurance coverage was requested, or if insurance is requested from a non-standard insurance provider.
    Please note this price is already included in the `amount` and `amount_local` fields on the Rate. Do not add this field to them.
    """
    messages: NotRequired[List[ResponseMessageTypedDict]]
    provider_image_75: NotRequired[str]
    r"""URL to the provider logo with max. dimensions of 75*75px.
    Please refer to the provider's Logo Usage Guidelines before using the logo.
    """
    provider_image_200: NotRequired[str]
    r"""URL to the provider logo with max. dimensions of 200*200px.
    Please refer to the provider's Logo Usage Guidelines before using the logo.
    """
    test: NotRequired[bool]
    r"""Indicates whether the object has been created in test mode."""
    zone: NotRequired[str]
    r"""The parcel's transit zone token. These tokens can vary depending on the provider."""


class Rate(BaseModel):
    amount: str
    r"""Final Rate price, expressed in the currency used in the sender's country."""

    amount_local: str
    r"""Final Rate price, expressed in the currency used in the recipient's country."""

    currency: str
    r"""Currency used in the sender's country, refers to `amount`.
    The <a href=\"http://www.xe.com/iso4217.php\">official ISO 4217</a> currency codes are used, e.g. `USD` or `EUR`.
    """

    currency_local: str
    r"""Currency used in the recipient's country, refers to `amount_local`.
    The <a href=\"http://www.xe.com/iso4217.php\">official ISO 4217</a> currency codes are used, e.g. `USD` or \"EUR\".
    """

    attributes: List[Attribute]
    r"""An array containing specific attributes of this Rate in context of the entire shipment.
    Attributes can be assigned `CHEAPEST`, `FASTEST`, or `BESTVALUE`.
    """

    carrier_account: str
    r"""Object ID of the carrier account that has been used to retrieve the rate."""

    object_created: datetime
    r"""Date and time of Rate creation."""

    object_id: str
    r"""Unique identifier of the given Rate object."""

    object_owner: str
    r"""Username of the user who created the rate object."""

    provider: str
    r"""Carrier offering the rate, e.g., `FedEx` or `Deutsche Post DHL`."""

    servicelevel: ServiceLevelWithParent

    shipment: str

    arrives_by: Optional[str] = None
    r"""Predicted time the carrier will deliver the package in the destination's local time zone. In the format `HH:MM:SS`."""

    duration_terms: Optional[str] = None
    r"""Further clarification of the transit times.
    Often, this includes notes that the transit time as given in \"days\" is only an average, not a guaranteed time.
    """

    estimated_days: Optional[int] = None
    r"""Estimated transit time (duration) in days of the Parcel at the given servicelevel.
    Please note that this is not binding, but only an average value as given by the provider.
    Shippo is not able to guarantee any transit times.
    """

    included_insurance_price: Optional[str] = None
    r"""Cost to the user to insure the Rate for the requested amount of coverage, if insurance coverage was requested.
    Expressed in the currency used in the sender's country. Will be null if no insurance coverage was requested, or if insurance is requested from a non-standard insurance provider.
    Please note this price is already included in the `amount` and `amount_local` fields on the Rate. Do not add this field to them.
    """

    messages: Optional[List[ResponseMessage]] = None

    provider_image_75: Optional[str] = None
    r"""URL to the provider logo with max. dimensions of 75*75px.
    Please refer to the provider's Logo Usage Guidelines before using the logo.
    """

    provider_image_200: Optional[str] = None
    r"""URL to the provider logo with max. dimensions of 200*200px.
    Please refer to the provider's Logo Usage Guidelines before using the logo.
    """

    test: Optional[bool] = None
    r"""Indicates whether the object has been created in test mode."""

    zone: Optional[str] = None
    r"""The parcel's transit zone token. These tokens can vary depending on the provider."""

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "arrives_by",
                "duration_terms",
                "estimated_days",
                "included_insurance_price",
                "messages",
                "provider_image_75",
                "provider_image_200",
                "test",
                "zone",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
