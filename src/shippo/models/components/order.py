"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .address import Address, AddressTypedDict
from .lineitem import LineItem, LineItemTypedDict
from .ordershopappenum import OrderShopAppEnum
from .orderstatusenum import OrderStatusEnum
from .weightunitenum import WeightUnitEnum
from pydantic import model_serializer
from shippo.types import BaseModel, UNSET_SENTINEL
from typing import List, Optional
from typing_extensions import NotRequired, TypedDict


class OrderTransactionTypedDict(TypedDict):
    pass


class OrderTransaction(BaseModel):
    pass


class OrderTypedDict(TypedDict):
    placed_at: str
    r"""Date and time when the order was placed. This datetime can be different from the datetime of the order object creation on Shippo."""
    to_address: AddressTypedDict
    r"""<a href=\"#tag/Addresses\">Address</a> object of the recipient / buyer. Will be returned expanded by default."""
    currency: NotRequired[str]
    r"""**Required if total_price is provided**<br>
    Currency of the <code>total_price</code> and <code>total_tax</code> amounts.
    """
    notes: NotRequired[str]
    r"""Custom buyer- or seller-provided notes about the order."""
    order_number: NotRequired[str]
    r"""An alphanumeric identifier for the order used by the seller/buyer. This identifier doesn't need to be unique."""
    order_status: NotRequired[OrderStatusEnum]
    r"""Current state of the order. See the <a href=\"https://docs.goshippo.com/docs/orders/orders/\">orders tutorial</a>
    for the logic of how the status is handled.
    """
    shipping_cost: NotRequired[str]
    r"""Amount paid by the buyer for shipping. This amount can be different from the price the seller will actually pay for shipping."""
    shipping_cost_currency: NotRequired[str]
    r"""**Required if shipping_cost is provided**<br>
    Currency of the <code>shipping_cost</code> amount.
    """
    shipping_method: NotRequired[str]
    r"""Shipping method (carrier + service or other free text description) chosen by the buyer.
    This value can be different from the shipping method the seller will actually choose.
    """
    subtotal_price: NotRequired[str]
    total_price: NotRequired[str]
    r"""Total amount paid by the buyer for this order."""
    total_tax: NotRequired[str]
    r"""Total tax amount paid by the buyer for this order."""
    weight: NotRequired[str]
    r"""Total weight of the order."""
    weight_unit: NotRequired[WeightUnitEnum]
    r"""The unit used for weight."""
    from_address: NotRequired[AddressTypedDict]
    r"""<a href=\"#tag/Addresses\">Address</a> object of the sender / seller. Will be returned expanded by default."""
    line_items: NotRequired[List[LineItemTypedDict]]
    r"""Array of <a href=\"#section/Line-Item\">line item</a> objects representing the items in this order.
    All objects will be returned expanded by default.
    """
    object_id: NotRequired[str]
    r"""Unique identifier of the order object."""
    object_owner: NotRequired[str]
    r"""Username of the user who created the object."""
    shop_app: NotRequired[OrderShopAppEnum]
    r"""Platform the order was created on and, if applicable, imported from.
    Orders created via the Shippo API or dashboard will have the value \"Shippo\".
    """
    transactions: NotRequired[List[OrderTransactionTypedDict]]
    r"""Array of <a href=\"#tag/Transactions\">transaction</a> objects representing all shipping labels purchased for this order.
    All objects are returned expanded with a limited number of fields by default.
    """


class Order(BaseModel):
    placed_at: str
    r"""Date and time when the order was placed. This datetime can be different from the datetime of the order object creation on Shippo."""

    to_address: Address
    r"""<a href=\"#tag/Addresses\">Address</a> object of the recipient / buyer. Will be returned expanded by default."""

    currency: Optional[str] = None
    r"""**Required if total_price is provided**<br>
    Currency of the <code>total_price</code> and <code>total_tax</code> amounts.
    """

    notes: Optional[str] = None
    r"""Custom buyer- or seller-provided notes about the order."""

    order_number: Optional[str] = None
    r"""An alphanumeric identifier for the order used by the seller/buyer. This identifier doesn't need to be unique."""

    order_status: Optional[OrderStatusEnum] = None
    r"""Current state of the order. See the <a href=\"https://docs.goshippo.com/docs/orders/orders/\">orders tutorial</a>
    for the logic of how the status is handled.
    """

    shipping_cost: Optional[str] = None
    r"""Amount paid by the buyer for shipping. This amount can be different from the price the seller will actually pay for shipping."""

    shipping_cost_currency: Optional[str] = None
    r"""**Required if shipping_cost is provided**<br>
    Currency of the <code>shipping_cost</code> amount.
    """

    shipping_method: Optional[str] = None
    r"""Shipping method (carrier + service or other free text description) chosen by the buyer.
    This value can be different from the shipping method the seller will actually choose.
    """

    subtotal_price: Optional[str] = None

    total_price: Optional[str] = None
    r"""Total amount paid by the buyer for this order."""

    total_tax: Optional[str] = None
    r"""Total tax amount paid by the buyer for this order."""

    weight: Optional[str] = None
    r"""Total weight of the order."""

    weight_unit: Optional[WeightUnitEnum] = None
    r"""The unit used for weight."""

    from_address: Optional[Address] = None
    r"""<a href=\"#tag/Addresses\">Address</a> object of the sender / seller. Will be returned expanded by default."""

    line_items: Optional[List[LineItem]] = None
    r"""Array of <a href=\"#section/Line-Item\">line item</a> objects representing the items in this order.
    All objects will be returned expanded by default.
    """

    object_id: Optional[str] = None
    r"""Unique identifier of the order object."""

    object_owner: Optional[str] = None
    r"""Username of the user who created the object."""

    shop_app: Optional[OrderShopAppEnum] = None
    r"""Platform the order was created on and, if applicable, imported from.
    Orders created via the Shippo API or dashboard will have the value \"Shippo\".
    """

    transactions: Optional[List[OrderTransaction]] = None
    r"""Array of <a href=\"#tag/Transactions\">transaction</a> objects representing all shipping labels purchased for this order.
    All objects are returned expanded with a limited number of fields by default.
    """

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(
            [
                "currency",
                "notes",
                "order_number",
                "order_status",
                "shipping_cost",
                "shipping_cost_currency",
                "shipping_method",
                "subtotal_price",
                "total_price",
                "total_tax",
                "weight",
                "weight_unit",
                "from_address",
                "line_items",
                "object_id",
                "object_owner",
                "shop_app",
                "transactions",
            ]
        )
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
