"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from .batchshipmentpaginatedlist import (
    BatchShipmentPaginatedList,
    BatchShipmentPaginatedListTypedDict,
)
from .labelfiletypeenum import LabelFileTypeEnum
from enum import Enum
from pydantic import model_serializer
from shippo.types import BaseModel, UNSET_SENTINEL
from typing import List, Optional
from typing_extensions import NotRequired, TypedDict


class ObjectResultsTypedDict(TypedDict):
    r"""An object containing the following counts:<br>`creation_succeeded`<br>`creation_failed`<br>`purchase_succeeded`<br>`purchase_failed`"""

    creation_failed: int
    creation_succeeded: int
    purchase_failed: int
    purchase_succeeded: int


class ObjectResults(BaseModel):
    r"""An object containing the following counts:<br>`creation_succeeded`<br>`creation_failed`<br>`purchase_succeeded`<br>`purchase_failed`"""

    creation_failed: int

    creation_succeeded: int

    purchase_failed: int

    purchase_succeeded: int


class BatchStatus(str, Enum):
    r"""Batches that are `VALIDATING` are being created and validated<br>
    `VALID` batches can be purchased<br>
    `INVALID` batches cannot be purchased, `INVALID` BatchShipments must be removed<br>
    Batches that are in the `PURCHASING` state are being purchased<br>
    `PURCHASED` batches are finished purchasing.
    """

    VALIDATING = "VALIDATING"
    VALID = "VALID"
    INVALID = "INVALID"
    PURCHASING = "PURCHASING"
    PURCHASED = "PURCHASED"


class BatchTypedDict(TypedDict):
    default_carrier_account: str
    r"""ID of the Carrier Account object to use as the default for all shipments in this Batch.
    The carrier account can be changed on a per-shipment basis by changing the carrier_account in the
    corresponding BatchShipment object.
    """
    default_servicelevel_token: str
    r"""Token of the service level to use as the default for all shipments in this Batch.
    The servicelevel can be changed on a per-shipment basis by changing the servicelevel_token in the
    corresponding BatchShipment object. <a href=\"#tag/Service-Levels\">Servicelevel tokens can be found here.</a>
    """
    batch_shipments: BatchShipmentPaginatedListTypedDict
    label_url: List[str]
    r"""An array of URLs each pointing to a merged file of 100 labels each"""
    object_created: str
    r"""Date and time of Batch creation"""
    object_id: str
    r"""Unique identifier of the given Batch object"""
    object_owner: str
    r"""Username of the user who created the Address object."""
    object_results: ObjectResultsTypedDict
    r"""An object containing the following counts:<br>`creation_succeeded`<br>`creation_failed`<br>`purchase_succeeded`<br>`purchase_failed`"""
    object_updated: str
    r"""Date and time of last update to the Batch"""
    status: BatchStatus
    r"""Batches that are `VALIDATING` are being created and validated<br>
    `VALID` batches can be purchased<br>
    `INVALID` batches cannot be purchased, `INVALID` BatchShipments must be removed<br>
    Batches that are in the `PURCHASING` state are being purchased<br>
    `PURCHASED` batches are finished purchasing.
    """
    label_filetype: NotRequired[LabelFileTypeEnum]
    r"""Print format of the <a href=\"https://docs.goshippo.com/docs/shipments/shippinglabelsizes/\">label</a>. If empty, will use the default format set from
    <a href=\"https://apps.goshippo.com/settings/labels\">the Shippo dashboard.</a>
    """
    metadata: NotRequired[str]
    r"""A string of up to 100 characters that can be filled with any additional information you want to attach to the object."""
    test: NotRequired[bool]


class Batch(BaseModel):
    default_carrier_account: str
    r"""ID of the Carrier Account object to use as the default for all shipments in this Batch.
    The carrier account can be changed on a per-shipment basis by changing the carrier_account in the
    corresponding BatchShipment object.
    """

    default_servicelevel_token: str
    r"""Token of the service level to use as the default for all shipments in this Batch.
    The servicelevel can be changed on a per-shipment basis by changing the servicelevel_token in the
    corresponding BatchShipment object. <a href=\"#tag/Service-Levels\">Servicelevel tokens can be found here.</a>
    """

    batch_shipments: BatchShipmentPaginatedList

    label_url: List[str]
    r"""An array of URLs each pointing to a merged file of 100 labels each"""

    object_created: str
    r"""Date and time of Batch creation"""

    object_id: str
    r"""Unique identifier of the given Batch object"""

    object_owner: str
    r"""Username of the user who created the Address object."""

    object_results: ObjectResults
    r"""An object containing the following counts:<br>`creation_succeeded`<br>`creation_failed`<br>`purchase_succeeded`<br>`purchase_failed`"""

    object_updated: str
    r"""Date and time of last update to the Batch"""

    status: BatchStatus
    r"""Batches that are `VALIDATING` are being created and validated<br>
    `VALID` batches can be purchased<br>
    `INVALID` batches cannot be purchased, `INVALID` BatchShipments must be removed<br>
    Batches that are in the `PURCHASING` state are being purchased<br>
    `PURCHASED` batches are finished purchasing.
    """

    label_filetype: Optional[LabelFileTypeEnum] = None
    r"""Print format of the <a href=\"https://docs.goshippo.com/docs/shipments/shippinglabelsizes/\">label</a>. If empty, will use the default format set from
    <a href=\"https://apps.goshippo.com/settings/labels\">the Shippo dashboard.</a>
    """

    metadata: Optional[str] = None
    r"""A string of up to 100 characters that can be filled with any additional information you want to attach to the object."""

    test: Optional[bool] = None

    @model_serializer(mode="wrap")
    def serialize_model(self, handler):
        optional_fields = set(["label_filetype", "metadata", "test"])
        serialized = handler(self)
        m = {}

        for n, f in type(self).model_fields.items():
            k = f.alias or n
            val = serialized.get(k)

            if val != UNSET_SENTINEL:
                if val is not None or k not in optional_fields:
                    m[k] = val

        return m
